<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>ÙƒÙˆÙŠØ² Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠ | Ø¯Ø®ÙˆÙ„</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body { background-color: #050a15; color: white; font-family: 'Cairo', sans-serif; background-image: url('https://www.transparenttextures.com/patterns/islamic-art.png'); overflow-x: hidden; }
        .ramadan-card { background: rgba(13, 27, 42, 0.9); border: 1px solid #b8860b; backdrop-filter: blur(10px); }
        
        /* ============================== */
        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„ÙÙˆØ§Ù†ÙŠØ³ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        /* ============================== */
        .hanging-fanoos {
            position: fixed; /* Ø¹Ø´Ø§Ù† ÙŠÙØ¶Ù„ÙˆØ§ Ù…ØªØ¹Ù„Ù‚ÙŠÙ† ÙÙŠ Ù…ÙƒØ§Ù†Ù‡Ù… Ø­ØªÙ‰ Ù„Ùˆ Ù†Ø²Ù„Ù†Ø§ Ø¨Ø§Ù„ØµÙØ­Ø© */
            top: -30px; /* Ù…ØªØ¹Ù„Ù‚ÙŠÙ† Ù…Ù† ÙÙˆÙ‚ Ø§Ù„Ø´Ø§Ø´Ø© */
            z-index: 10; /* ÙŠØ¸Ù‡Ø±ÙˆØ§ ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø³ ØªØ­Øª Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
            width: 70px; /* Ø­Ø¬Ù… Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
            filter: drop-shadow(0 10px 15px rgba(255, 200, 0, 0.4)); /* ØªØ£Ø«ÙŠØ± Ø§Ù„ÙˆÙ‡Ø¬ ÙˆØ§Ù„Ø¥Ø¶Ø§Ø¡Ø© */
            pointer-events: none; /* Ø¹Ø´Ø§Ù† Ù„Ùˆ Ø¬Ù… ÙÙˆÙ‚ Ø²Ø±Ø§Ø± Ù… ÙŠÙ…Ù†Ø¹ÙˆØ´ Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ */
            animation: sway 3s ease-in-out infinite alternate; /* Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ù…Ø±Ø¬ÙŠØ­Ø© */
        }
        .fanoos-left { left: 10px; animation-delay: 0s; }
        .fanoos-right { right: 10px; animation-delay: 1.5s; /* ØªØ£Ø®ÙŠØ± Ø¹Ø´Ø§Ù† Ù…ÙŠØªØ­Ø±ÙƒÙˆØ´ Ù…Ø¹ Ø¨Ø¹Ø¶ Ø¨Ø§Ù„Ø¸Ø¨Ø· */ }

        /* ØªÙƒØ¨ÙŠØ± Ø­Ø¬Ù…Ù‡Ù… Ø´ÙˆÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        @media (min-width: 768px) {
           .hanging-fanoos { width: 110px; top: -40px; }
           .fanoos-left { left: 30px; }
           .fanoos-right { right: 30px; }
        }

        /* Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±Ø¬ÙŠØ­Ø© */
        @keyframes sway {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 relative">

    <img src="https://i.ibb.co/mzs9j9K/fanoos.png" class="hanging-fanoos fanoos-right" alt="ÙØ§Ù†ÙˆØ³ Ø±Ù…Ø¶Ø§Ù† ÙŠÙ…ÙŠÙ†">
    <img src="https://i.ibb.co/mzs9j9K/fanoos.png" class="hanging-fanoos fanoos-left" alt="ÙØ§Ù†ÙˆØ³ Ø±Ù…Ø¶Ø§Ù† Ø´Ù…Ø§Ù„">


    <img src="https://i.postimg.cc/9Fpp5TVC/IMG-20260217-031514.png" class="w-40 h-40 object-contain mb-6 shadow-2xl rounded-full border-4 border-yellow-600 relative z-20">

    <div class="ramadan-card p-6 rounded-xl text-center mb-8 max-w-md w-full border-r-4 border-yellow-500 shadow-lg relative z-20">
        <p class="text-yellow-400 text-xs mb-2 italic">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ… âœ¨</p>
        <p class="text-lg font-bold leading-relaxed" id="daily-message">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„... ğŸŒ™</p>
    </div>

    <div class="ramadan-card p-8 rounded-2xl shadow-xl w-full max-w-sm text-center relative z-20">
        <h2 class="text-2xl font-bold mb-6 text-yellow-500">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ</h2>
        
        <input type="password" id="password-input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„" class="w-full p-4 rounded-xl bg-gray-900 border border-gray-700 text-center text-white mb-4 focus:outline-none focus:border-yellow-500 font-bold tracking-widest text-lg transition shadow-inner">
        
        <button id="login-btn" class="w-full bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-500 hover:to-yellow-600 text-white font-bold py-4 rounded-xl transition shadow-lg text-lg transform active:scale-95">Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
        
        <p id="error-msg" class="text-red-500 mt-4 hidden text-sm font-bold bg-red-900/30 py-2 rounded-lg border border-red-800"><i class="fas fa-exclamation-triangle ml-1"></i> Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­!</p>
    </div>

    <div class="flex mt-10 gap-6 relative z-20">
        <a href="https://www.facebook.com/share/1GmFwuYWZv/" target="_blank" class="hover:scale-110 transition drop-shadow-lg"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" class="w-8 h-8"></a>
        <a href="https://chat.whatsapp.com/D5dKR9EdHZjDPgrFpHl28J" target="_blank" class="hover:scale-110 transition drop-shadow-lg"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="w-8 h-8"></a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, getDocs, query, where, doc, getDoc, initializeFirestore, persistentLocalCache } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyBZMnIJ_IOqeAfXqFt-m4tM1Lvo0tUDnk8", projectId: "ramadan-87817", appId: "1:343525703258:web:6776b4857425df8bcca263" };
        const app = initializeApp(firebaseConfig);
        const db = initializeFirestore(app, { localCache: persistentLocalCache() });

        async function fetchMessage() {
            try {
                const docSnap = await getDoc(doc(db, "settings", "dailyData"));
                if (docSnap.exists() && docSnap.data().message) {
                    document.getElementById('daily-message').innerText = docSnap.data().message;
                } else {
                    document.getElementById('daily-message').innerText = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ ÙƒÙˆÙŠØ² Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØŒ Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… Ø§Ù„ØªÙˆÙÙŠÙ‚!";
                }
            } catch(e) { document.getElementById('daily-message').innerText = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ…!"; }
        }
        fetchMessage();

        window.onload = () => {
            const savedPassword = localStorage.getItem('userSecretCode');
            if (savedPassword) document.getElementById('password-input').value = savedPassword;
        };

        document.getElementById('login-btn').addEventListener('click', async () => {
            const pass = document.getElementById('password-input').value;
            const btn = document.getElementById('login-btn');
            const err = document.getElementById('error-msg');
            
            if(!pass) { err.innerText = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯!"; err.classList.remove('hidden'); return; }

            btn.innerHTML = '<i class="fas fa-spinner fa-spin ml-2"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚..'; btn.disabled = true; err.classList.add('hidden');
            
            try {
                const q = query(collection(db, "users"), where("password", "==", pass));
                const querySnapshot = await getDocs(q);
                
                if (!querySnapshot.empty) {
                    querySnapshot.forEach((doc) => {
                        localStorage.setItem('currentUser', JSON.stringify({id: doc.id, ...doc.data()}));
                        localStorage.setItem('userSecretCode', pass);
                    });
                    window.location.href = "dashboard.html";
                } else {
                    err.innerText = "Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­!"; err.classList.remove('hidden');
                    btn.innerText = "Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©"; btn.disabled = false;
                }
            } catch (error) {
                err.innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."; err.classList.remove('hidden');
                btn.innerText = "Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©"; btn.disabled = false;
            }
        });
    </script>
</body>
</html>
